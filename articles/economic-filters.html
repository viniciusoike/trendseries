<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Economic Filters for Business Cycle Analysis • trendseries</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Economic Filters for Business Cycle Analysis">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">trendseries</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/trendseries.html">Get started</a></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/advanced-methods.html">Advanced Trend Extraction Methods</a></li>
    <li><a class="dropdown-item" href="../articles/economic-filters.html">Economic Filters for Business Cycle Analysis</a></li>
    <li><a class="dropdown-item" href="../articles/moving-averages.html">Moving Averages for Trend Analysis</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/viniciusoike/trendseries/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Economic Filters for Business Cycle Analysis</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/viniciusoike/trendseries/blob/v1.0.0/vignettes/economic-filters.Rmd" class="external-link"><code>vignettes/economic-filters.Rmd</code></a></small>
      <div class="d-none name"><code>economic-filters.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/viniciusoike/trendseries" class="external-link">trendseries</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org" class="external-link">tidyr</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Load data</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"gdp_construction"</span>, <span class="st">"ibcbr"</span>, <span class="st">"vehicles"</span>, package <span class="op">=</span> <span class="st">"trendseries"</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Economic filters are specialized methods designed for
<strong>business cycle analysis</strong> - extracting trends and
measuring cyclical fluctuations in macroeconomic data. Unlike simple
moving averages, these methods are based on economic theory about how
business cycles behave.</p>
<p>This vignette covers the most important economic filters:</p>
<ul>
<li>
<strong>Hodrick-Prescott (HP) filter</strong>: The standard in
macroeconomics</li>
<li>
<strong>Baxter-King (BK) filter</strong>: Isolates specific business
cycle frequencies</li>
<li>
<strong>Christiano-Fitzgerald (CF) filter</strong>: Asymmetric
bandpass filter</li>
<li>
<strong>Hamilton filter</strong>: Recent alternative to HP
filter</li>
</ul>
<div class="section level3">
<h3 id="when-to-use-economic-filters">When to Use Economic Filters<a class="anchor" aria-label="anchor" href="#when-to-use-economic-filters"></a>
</h3>
<p>Use economic filters when: - Analyzing GDP, industrial production, or
other macroeconomic aggregates - Measuring business cycles and output
gaps - Decomposing series into trend and cycle components - Following
standard economic research practices</p>
<p>These are less suitable for: - High-frequency financial data (use
EWMA or other methods) - Data with irregular patterns - Short time
series (need at least 30-40 observations)</p>
</div>
</div>
<div class="section level2">
<h2 id="the-hodrick-prescott-filter-the-standard-approach">The Hodrick-Prescott Filter: The Standard Approach<a class="anchor" aria-label="anchor" href="#the-hodrick-prescott-filter-the-standard-approach"></a>
</h2>
<p>The HP filter is the most widely used method in macroeconomics. It
finds a smooth trend by minimizing both the fit to the data and the
variability of the trend.</p>
<div class="section level3">
<h3 id="basic-example-with-quarterly-data">Basic Example with Quarterly Data<a class="anchor" aria-label="anchor" href="#basic-example-with-quarterly-data"></a>
</h3>
<p>Let’s start with quarterly GDP construction data:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Apply HP filter to quarterly data</span></span>
<span><span class="va">gdp_hp</span> <span class="op">&lt;-</span> <span class="va">gdp_construction</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span></span>
<span>    value_col <span class="op">=</span> <span class="st">"gdp_construction"</span>,</span>
<span>    methods <span class="op">=</span> <span class="st">"hp"</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># View results</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">gdp_hp</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   date       gdp_construction trend_hp</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;date&gt;</span>                <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1995-01-01            100       101.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> 1995-04-01            100       101.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> 1995-07-01            100       102.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> 1995-10-01            100       103.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> 1996-01-01             97.8     103.</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> 1996-04-01            101.      104.</span></span></code></pre></div>
<p>Now visualize the trend and the cyclical component (gap):</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate the cycle (deviation from trend)</span></span>
<span><span class="va">gdp_hp</span> <span class="op">&lt;-</span> <span class="va">gdp_hp</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>cycle <span class="op">=</span> <span class="va">gdp_construction</span> <span class="op">-</span> <span class="va">trend_hp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot 1: Trend vs Original</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">gdp_hp</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">gdp_construction</span>, <span class="va">trend_hp</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">gdp_construction</span>, <span class="va">trend_hp</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">"series"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>series <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">series</span> <span class="op">==</span> <span class="st">"gdp_construction"</span>, <span class="st">"Original"</span>, <span class="st">"HP Trend"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">value</span>, color <span class="op">=</span> <span class="va">series</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"GDP Construction: Original vs HP Trend"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Quarterly data with standard HP filter (λ=1600)"</span>,</span>
<span>    x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Index"</span>,</span>
<span>    color <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot 2: Cyclical component</span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">gdp_hp</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">cycle</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.9</span>, color <span class="op">=</span> <span class="st">"#0072B2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Cyclical Component (Output Gap)"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Deviations from HP trend"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Gap (index points)"</span>,</span>
<span>    color <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/hp-plot-1.png" width="768"></p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/hp-plot-2.png" width="768"></p>
<p>The cyclical component shows periods when the construction sector was
above trend (booms) and below trend (recessions).</p>
</div>
<div class="section level3">
<h3 id="the-lambda-parameter">The Lambda Parameter<a class="anchor" aria-label="anchor" href="#the-lambda-parameter"></a>
</h3>
<p>The HP filter has one key parameter: <strong>lambda (λ)</strong>,
which controls smoothness:</p>
<ul>
<li>
<strong>Higher λ</strong>: Smoother trend, captures only long-term
movements</li>
<li>
<strong>Lower λ</strong>: More flexible trend, follows data more
closely</li>
</ul>
<p><strong>Standard values</strong>: - Quarterly data: λ = 1600
(Hodrick-Prescott’s original recommendation) - Monthly data: λ = 14400
(adjusted for frequency) - Annual data: λ = 100</p>
<p>Let’s see the effect of different lambda values:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Test different lambda values on quarterly data</span></span>
<span><span class="va">lambdas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">400</span>, <span class="fl">1600</span>, <span class="fl">6400</span><span class="op">)</span></span>
<span></span>
<span><span class="va">gdp_lambdas</span> <span class="op">&lt;-</span> <span class="va">gdp_construction</span></span>
<span></span>
<span><span class="kw">for</span> <span class="op">(</span><span class="va">lambda</span> <span class="kw">in</span> <span class="va">lambdas</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">temp</span> <span class="op">&lt;-</span> <span class="va">gdp_construction</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span></span>
<span>      value_col <span class="op">=</span> <span class="st">"gdp_construction"</span>,</span>
<span>      methods <span class="op">=</span> <span class="st">"hp"</span>,</span>
<span>      smoothing <span class="op">=</span> <span class="va">lambda</span></span>
<span>    <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">trend_hp</span><span class="op">)</span></span>
<span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">temp</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"hp_"</span>, <span class="va">lambda</span><span class="op">)</span></span>
<span>  <span class="va">gdp_lambdas</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></span><span class="op">(</span><span class="va">gdp_lambdas</span>, <span class="va">temp</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="co"># Plot</span></span>
<span><span class="va">gdp_lambdas</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">gdp_construction</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"hp_"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span></span>
<span>    cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">gdp_construction</span>, <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"hp_"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    names_to <span class="op">=</span> <span class="st">"method"</span>,</span>
<span>    values_to <span class="op">=</span> <span class="st">"value"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    method <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">method</span> <span class="op">==</span> <span class="st">"gdp_construction"</span> <span class="op">~</span> <span class="st">"Original"</span>,</span>
<span>      <span class="va">method</span> <span class="op">==</span> <span class="st">"hp_400"</span> <span class="op">~</span> <span class="st">"λ = 400 (flexible)"</span>,</span>
<span>      <span class="va">method</span> <span class="op">==</span> <span class="st">"hp_1600"</span> <span class="op">~</span> <span class="st">"λ = 1600 (standard)"</span>,</span>
<span>      <span class="va">method</span> <span class="op">==</span> <span class="st">"hp_6400"</span> <span class="op">~</span> <span class="st">"λ = 6400 (very smooth)"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">value</span>, color <span class="op">=</span> <span class="va">method</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"HP Filter with Different Lambda Values"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Quarterly GDP construction data"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Index"</span>,</span>
<span>    color <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/hp-lambda-1.png" width="768"></p>
<p><strong>Recommendation</strong>: Use the standard values (1600 for
quarterly, 14400 for monthly) unless you have a specific reason to
change them.</p>
</div>
<div class="section level3">
<h3 id="hp-filter-on-monthly-data">HP Filter on Monthly Data<a class="anchor" aria-label="anchor" href="#hp-filter-on-monthly-data"></a>
</h3>
<p>The HP filter works exactly the same way on monthly data, but uses a
different default lambda:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Apply HP filter to monthly IBC-Br data</span></span>
<span><span class="va">ibcbr_hp</span> <span class="op">&lt;-</span> <span class="va">ibcbr</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">120</span><span class="op">)</span> <span class="op">|&gt;</span>  <span class="co"># Last 10 years</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span></span>
<span>    value_col <span class="op">=</span> <span class="st">"ibcbr"</span>,</span>
<span>    methods <span class="op">=</span> <span class="st">"hp"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>cycle <span class="op">=</span> <span class="va">ibcbr</span> <span class="op">-</span> <span class="va">trend_hp</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot trend and cycle</span></span>
<span><span class="va">p1</span> <span class="op">&lt;-</span> <span class="va">ibcbr_hp</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">ibcbr</span>, <span class="va">trend_hp</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">ibcbr</span>, <span class="va">trend_hp</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">"series"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>series <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="va">series</span> <span class="op">==</span> <span class="st">"ibcbr"</span>, <span class="st">"Original"</span>, <span class="st">"HP Trend"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">value</span>, color <span class="op">=</span> <span class="va">series</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"IBC-Br Economic Activity: HP Trend"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Monthly data with λ=14400"</span>,</span>
<span>    x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Index"</span>,</span>
<span>    color <span class="op">=</span> <span class="cn">NULL</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">p2</span> <span class="op">&lt;-</span> <span class="va">ibcbr_hp</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">cycle</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.8</span>, color <span class="op">=</span> <span class="st">"#0072B2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="va">cycle</span>, <span class="fl">0</span><span class="op">)</span>, ymax <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.3</span>, fill <span class="op">=</span> <span class="st">"#D55E00"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="fl">0</span>, ymax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="va">cycle</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.3</span>, fill <span class="op">=</span> <span class="st">"#009E73"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Business Cycle Component"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Green = above trend (expansion), Red = below trend (contraction)"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Gap (index points)"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p1</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/hp-monthly-1.png" width="768"></p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/print.html" class="external-link">print</a></span><span class="op">(</span><span class="va">p2</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/hp-monthly-2.png" width="768"></p>
<p>The cyclical component clearly shows the economic contraction during
the pandemic and subsequent recovery.</p>
</div>
</div>
<div class="section level2">
<h2 id="bandpass-filters-isolating-business-cycles">Bandpass Filters: Isolating Business Cycles<a class="anchor" aria-label="anchor" href="#bandpass-filters-isolating-business-cycles"></a>
</h2>
<p>While the HP filter separates trend from cycle, <strong>bandpass
filters</strong> specifically isolate fluctuations within a certain
frequency range. This is useful when you want to focus on “true”
business cycles (typically 6-32 quarters or 1.5-8 years).</p>
<div class="section level3">
<h3 id="baxter-king-filter">Baxter-King Filter<a class="anchor" aria-label="anchor" href="#baxter-king-filter"></a>
</h3>
<p>The BK filter isolates fluctuations between a lower and upper period
bound:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Apply BK filter to quarterly GDP data</span></span>
<span><span class="co"># Isolate cycles between 6 and 32 quarters (standard business cycle range)</span></span>
<span><span class="va">gdp_bk</span> <span class="op">&lt;-</span> <span class="va">gdp_construction</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span></span>
<span>    value_col <span class="op">=</span> <span class="st">"gdp_construction"</span>,</span>
<span>    methods <span class="op">=</span> <span class="st">"bk"</span>,</span>
<span>    band <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">32</span><span class="op">)</span>  <span class="co"># Business cycle frequencies</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># The BK filter returns the cycle, not the trend</span></span>
<span><span class="co"># So we need to calculate the trend as: trend = original - cycle</span></span>
<span><span class="va">gdp_bk</span> <span class="op">&lt;-</span> <span class="va">gdp_bk</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    cycle_bk <span class="op">=</span> <span class="va">trend_bk</span>,  <span class="co"># Rename for clarity</span></span>
<span>    trend_bk_calc <span class="op">=</span> <span class="va">gdp_construction</span> <span class="op">-</span> <span class="va">cycle_bk</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot the cycle</span></span>
<span><span class="va">gdp_bk</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">cycle_bk</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span>  <span class="co"># BK loses observations at edges</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">cycle_bk</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.9</span>, color <span class="op">=</span> <span class="st">"#0072B2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="va">cycle_bk</span>, <span class="fl">0</span><span class="op">)</span>, ymax <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.3</span>, fill <span class="op">=</span> <span class="st">"#D55E00"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="fl">0</span>, ymax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="va">cycle_bk</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.3</span>, fill <span class="op">=</span> <span class="st">"#009E73"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Baxter-King Business Cycle"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Isolates fluctuations between 6-32 quarters"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Cycle (index points)"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/bk-filter-1.png" width="768"></p>
<p><strong>Note</strong>: The BK filter loses observations at the
beginning and end of the sample. This is the price for isolating
specific frequencies.</p>
</div>
<div class="section level3">
<h3 id="christiano-fitzgerald-filter">Christiano-Fitzgerald Filter<a class="anchor" aria-label="anchor" href="#christiano-fitzgerald-filter"></a>
</h3>
<p>The CF filter is similar to BK but uses all available data more
efficiently (asymmetric filter):</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Apply CF filter</span></span>
<span><span class="va">gdp_cf</span> <span class="op">&lt;-</span> <span class="va">gdp_construction</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span></span>
<span>    value_col <span class="op">=</span> <span class="st">"gdp_construction"</span>,</span>
<span>    methods <span class="op">=</span> <span class="st">"cf"</span>,</span>
<span>    band <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">32</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    cycle_cf <span class="op">=</span> <span class="va">trend_cf</span>,</span>
<span>    trend_cf_calc <span class="op">=</span> <span class="va">gdp_construction</span> <span class="op">-</span> <span class="va">cycle_cf</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare BK and CF cycles</span></span>
<span><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="va">gdp_bk</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, cycle <span class="op">=</span> <span class="va">cycle_bk</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"Baxter-King"</span><span class="op">)</span>,</span>
<span></span>
<span>  <span class="va">gdp_cf</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, cycle <span class="op">=</span> <span class="va">cycle_cf</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"Christiano-Fitzgerald"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">comparison</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">cycle</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">cycle</span>, color <span class="op">=</span> <span class="va">method</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Comparing BK and CF Filters"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Both isolate 6-32 quarter business cycles"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Cycle (index points)"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Method"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/cf-filter-1.png" width="768"></p>
<p>The CF filter produces similar results to BK but uses more
observations (fewer NAs at the edges).</p>
</div>
<div class="section level3">
<h3 id="choosing-band-parameters">Choosing Band Parameters<a class="anchor" aria-label="anchor" href="#choosing-band-parameters"></a>
</h3>
<p>The band parameter <code>c(low, high)</code> defines the cycle period
range:</p>
<p><strong>For quarterly data</strong>: - Standard business cycles:
<code>c(6, 32)</code> (1.5 to 8 years) - Short cycles:
<code>c(4, 12)</code> (1 to 3 years) - Long cycles:
<code>c(8, 40)</code> (2 to 10 years)</p>
<p><strong>For monthly data</strong>: - Standard business cycles:
<code>c(18, 96)</code> (1.5 to 8 years) - Short cycles:
<code>c(12, 36)</code> (1 to 3 years)</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Try different frequency bands on monthly vehicle data</span></span>
<span><span class="va">vehicles_recent</span> <span class="op">&lt;-</span> <span class="va">vehicles</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">120</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Short cycles (1-2 years)</span></span>
<span><span class="va">vehicles_short</span> <span class="op">&lt;-</span> <span class="va">vehicles_recent</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"vehicles"</span>, methods <span class="op">=</span> <span class="st">"cf"</span>, band <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">12</span>, <span class="fl">24</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">vehicles</span>, cycle_short <span class="op">=</span> <span class="va">trend_cf</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Medium cycles (1.5-4 years)</span></span>
<span><span class="va">vehicles_medium</span> <span class="op">&lt;-</span> <span class="va">vehicles_recent</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"vehicles"</span>, methods <span class="op">=</span> <span class="st">"cf"</span>, band <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="fl">48</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span>cycle_medium <span class="op">=</span> <span class="va">trend_cf</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine</span></span>
<span><span class="va">vehicles_bands</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_cols.html" class="external-link">bind_cols</a></span><span class="op">(</span><span class="va">vehicles_short</span>, <span class="va">vehicles_medium</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">cycle_short</span>, <span class="va">cycle_medium</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://tidyr.tidyverse.org/reference/pivot_longer.html" class="external-link">pivot_longer</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="fu"><a href="https://tidyselect.r-lib.org/reference/starts_with.html" class="external-link">starts_with</a></span><span class="op">(</span><span class="st">"cycle"</span><span class="op">)</span>, names_to <span class="op">=</span> <span class="st">"band"</span>, values_to <span class="op">=</span> <span class="st">"cycle"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    band <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/case_when.html" class="external-link">case_when</a></span><span class="op">(</span></span>
<span>      <span class="va">band</span> <span class="op">==</span> <span class="st">"cycle_short"</span> <span class="op">~</span> <span class="st">"Short (12-24 months)"</span>,</span>
<span>      <span class="va">band</span> <span class="op">==</span> <span class="st">"cycle_medium"</span> <span class="op">~</span> <span class="st">"Medium (18-48 months)"</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="va">vehicles_bands</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">cycle</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">cycle</span>, color <span class="op">=</span> <span class="va">band</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"CF Filter with Different Frequency Bands"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Vehicle production - different cycle definitions"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Cycle"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Frequency Band"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/band-comparison-1.png" width="768"></p>
<p>Different frequency bands highlight different cyclical patterns in
the data.</p>
</div>
</div>
<div class="section level2">
<h2 id="the-hamilton-filter-a-modern-alternative">The Hamilton Filter: A Modern Alternative<a class="anchor" aria-label="anchor" href="#the-hamilton-filter-a-modern-alternative"></a>
</h2>
<p>James Hamilton (2018) proposed an alternative to the HP filter based
on regression. It avoids some statistical issues with the HP filter and
is gaining popularity.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Apply Hamilton filter to quarterly GDP</span></span>
<span><span class="va">gdp_hamilton</span> <span class="op">&lt;-</span> <span class="va">gdp_construction</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span></span>
<span>    value_col <span class="op">=</span> <span class="st">"gdp_construction"</span>,</span>
<span>    methods <span class="op">=</span> <span class="st">"hamilton"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>cycle_hamilton <span class="op">=</span> <span class="va">gdp_construction</span> <span class="op">-</span> <span class="va">trend_hamilton</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Compare HP and Hamilton</span></span>
<span><span class="va">comparison_hp_ham</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span></span>
<span>  <span class="va">gdp_hp</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">cycle</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"HP Filter"</span><span class="op">)</span>,</span>
<span></span>
<span>  <span class="va">gdp_hamilton</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, cycle <span class="op">=</span> <span class="va">cycle_hamilton</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>method <span class="op">=</span> <span class="st">"Hamilton Filter"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">comparison_hp_ham</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">cycle</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">cycle</span>, color <span class="op">=</span> <span class="va">method</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"HP Filter vs Hamilton Filter"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Both estimate business cycle deviations"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Cycle (output gap)"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Method"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/hamilton-1.png" width="768"></p>
<p>The Hamilton filter often produces similar results to HP but can
differ at turning points and at the end of the sample.</p>
</div>
<div class="section level2">
<h2 id="practical-business-cycle-analysis">Practical Business Cycle Analysis<a class="anchor" aria-label="anchor" href="#practical-business-cycle-analysis"></a>
</h2>
<div class="section level3">
<h3 id="example-1-identifying-recessions">Example 1: Identifying Recessions<a class="anchor" aria-label="anchor" href="#example-1-identifying-recessions"></a>
</h3>
<p>Economic filters help identify recessions - periods when the economy
operates below its trend:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Use HP filter cycle to identify recession periods</span></span>
<span><span class="va">ibcbr_cycles</span> <span class="op">&lt;-</span> <span class="va">ibcbr</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">120</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"ibcbr"</span>, methods <span class="op">=</span> <span class="st">"hp"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    cycle <span class="op">=</span> <span class="va">ibcbr</span> <span class="op">-</span> <span class="va">trend_hp</span>,</span>
<span>    is_recession <span class="op">=</span> <span class="va">cycle</span> <span class="op">&lt;</span> <span class="fl">0</span>  <span class="co"># Below trend</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot with recession shading</span></span>
<span><span class="va">ibcbr_cycles</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">cycle</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span></span>
<span>    data <span class="op">=</span> <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">ibcbr_cycles</span>, <span class="va">is_recession</span><span class="op">)</span>,</span>
<span>    <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="op">-</span><span class="cn">Inf</span>, ymax <span class="op">=</span> <span class="cn">Inf</span><span class="op">)</span>,</span>
<span>    alpha <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>    fill <span class="op">=</span> <span class="st">"gray70"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.9</span>, color <span class="op">=</span> <span class="st">"#0072B2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"IBC-Br Business Cycles and Recessions"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Gray shading indicates periods below trend"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Output Gap (index points)"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/recession-dating-1.png" width="768"></p>
</div>
<div class="section level3">
<h3 id="example-2-output-gap-analysis">Example 2: Output Gap Analysis<a class="anchor" aria-label="anchor" href="#example-2-output-gap-analysis"></a>
</h3>
<p>The output gap (cycle component) is crucial for monetary policy
decisions:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Calculate output gap as percentage of trend</span></span>
<span><span class="va">ibcbr_gap</span> <span class="op">&lt;-</span> <span class="va">ibcbr</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">120</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"ibcbr"</span>, methods <span class="op">=</span> <span class="st">"hp"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    gap_pct <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="va">ibcbr</span> <span class="op">-</span> <span class="va">trend_hp</span><span class="op">)</span> <span class="op">/</span> <span class="va">trend_hp</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Plot output gap</span></span>
<span><span class="va">ibcbr_gap</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">gap_pct</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="op">-</span><span class="fl">2</span>, <span class="fl">2</span><span class="op">)</span>, linetype <span class="op">=</span> <span class="st">"dotted"</span>, color <span class="op">=</span> <span class="st">"gray60"</span>, alpha <span class="op">=</span> <span class="fl">0.7</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.9</span>, color <span class="op">=</span> <span class="st">"#0072B2"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmin</a></span><span class="op">(</span><span class="va">gap_pct</span>, <span class="fl">0</span><span class="op">)</span>, ymax <span class="op">=</span> <span class="fl">0</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.3</span>, fill <span class="op">=</span> <span class="st">"#D55E00"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>ymin <span class="op">=</span> <span class="fl">0</span>, ymax <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">pmax</a></span><span class="op">(</span><span class="va">gap_pct</span>, <span class="fl">0</span><span class="op">)</span><span class="op">)</span>, alpha <span class="op">=</span> <span class="fl">0.3</span>, fill <span class="op">=</span> <span class="st">"#009E73"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Output Gap: Economic Activity vs Trend"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"Gap as percentage of trend (dotted lines = ±2%)"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Gap (%)"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/output-gap-1.png" width="768"></p>
<p>Positive gaps (green) suggest the economy is “overheating,” while
negative gaps (red) indicate slack capacity.</p>
</div>
<div class="section level3">
<h3 id="example-3-comparing-multiple-indicators">Example 3: Comparing Multiple Indicators<a class="anchor" aria-label="anchor" href="#example-3-comparing-multiple-indicators"></a>
</h3>
<p>Let’s compare business cycles across different sectors:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Get recent data for multiple series</span></span>
<span><span class="va">recent_gdp</span> <span class="op">&lt;-</span> <span class="va">gdp_construction</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">40</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"gdp_construction"</span>, methods <span class="op">=</span> <span class="st">"hp"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    cycle <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="va">gdp_construction</span> <span class="op">-</span> <span class="va">trend_hp</span><span class="op">)</span> <span class="op">/</span> <span class="va">trend_hp</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span>,</span>
<span>    indicator <span class="op">=</span> <span class="st">"GDP Construction"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">indicator</span>, <span class="va">cycle</span><span class="op">)</span></span>
<span></span>
<span><span class="va">recent_vehicles</span> <span class="op">&lt;-</span> <span class="va">vehicles</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">120</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"vehicles"</span>, methods <span class="op">=</span> <span class="st">"hp"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    cycle <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="va">vehicles</span> <span class="op">-</span> <span class="va">trend_hp</span><span class="op">)</span> <span class="op">/</span> <span class="va">trend_hp</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span>,</span>
<span>    indicator <span class="op">=</span> <span class="st">"Vehicle Production"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">indicator</span>, <span class="va">cycle</span><span class="op">)</span></span>
<span></span>
<span><span class="va">recent_activity</span> <span class="op">&lt;-</span> <span class="va">ibcbr</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_tail</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">120</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"ibcbr"</span>, methods <span class="op">=</span> <span class="st">"hp"</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span></span>
<span>    cycle <span class="op">=</span> <span class="op">(</span><span class="op">(</span><span class="va">ibcbr</span> <span class="op">-</span> <span class="va">trend_hp</span><span class="op">)</span> <span class="op">/</span> <span class="va">trend_hp</span><span class="op">)</span> <span class="op">*</span> <span class="fl">100</span>,</span>
<span>    indicator <span class="op">=</span> <span class="st">"Economic Activity"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">indicator</span>, <span class="va">cycle</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Combine and plot</span></span>
<span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/bind_rows.html" class="external-link">bind_rows</a></span><span class="op">(</span><span class="va">recent_gdp</span>, <span class="va">recent_vehicles</span>, <span class="va">recent_activity</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">cycle</span>, color <span class="op">=</span> <span class="va">indicator</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_abline.html" class="external-link">geom_hline</a></span><span class="op">(</span>yintercept <span class="op">=</span> <span class="fl">0</span>, linetype <span class="op">=</span> <span class="st">"dashed"</span>, color <span class="op">=</span> <span class="st">"gray50"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>linewidth <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="st">"Business Cycles Across Economic Sectors"</span>,</span>
<span>    subtitle <span class="op">=</span> <span class="st">"All series show output gaps as % of HP trend"</span>,</span>
<span>    x <span class="op">=</span> <span class="st">"Date"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Output Gap (%)"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Indicator"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
<p><img src="economic-filters_files/figure-html/multi-sector-1.png" width="768"></p>
<p>This reveals which sectors are more or less cyclical and whether they
move together.</p>
</div>
</div>
<div class="section level2">
<h2 id="choosing-the-right-economic-filter">Choosing the Right Economic Filter<a class="anchor" aria-label="anchor" href="#choosing-the-right-economic-filter"></a>
</h2>
<p>Here’s a practical decision guide:</p>
<div class="section level3">
<h3 id="basic-questions">Basic Questions<a class="anchor" aria-label="anchor" href="#basic-questions"></a>
</h3>
<ol style="list-style-type: decimal">
<li>
<strong>Need a standard, widely-accepted method?</strong>
<ul>
<li>→ Use <strong>HP filter</strong> (λ=1600 for quarterly, λ=14400 for
monthly)</li>
</ul>
</li>
<li>
<strong>Want to isolate specific business cycle
frequencies?</strong>
<ul>
<li>→ Use <strong>BK or CF filter</strong> with band = c(6, 32) for
quarterly or c(18, 96) for monthly</li>
</ul>
</li>
<li>
<strong>Concerned about end-point problems with HP?</strong>
<ul>
<li>→ Try <strong>Hamilton filter</strong>
</li>
</ul>
</li>
<li>
<strong>Need values at the edges of your sample?</strong>
<ul>
<li>→ Use <strong>HP or Hamilton</strong> (avoid BK which loses
observations)</li>
</ul>
</li>
<li>
<strong>Following recent economic research?</strong>
<ul>
<li>→ Consider <strong>Hamilton filter</strong> (but HP is still
standard)</li>
</ul>
</li>
</ol>
</div>
<div class="section level3">
<h3 id="method-comparison">Method Comparison<a class="anchor" aria-label="anchor" href="#method-comparison"></a>
</h3>
<table class="table">
<thead><tr class="header">
<th>Method</th>
<th>Trend</th>
<th>Cycle</th>
<th>Edge Behavior</th>
<th>Best For</th>
</tr></thead>
<tbody>
<tr class="odd">
<td><strong>HP</strong></td>
<td>✓</td>
<td>✓</td>
<td>Good</td>
<td>General business cycle analysis</td>
</tr>
<tr class="even">
<td><strong>BK</strong></td>
<td>-</td>
<td>✓</td>
<td>Loses observations</td>
<td>Isolating specific frequencies</td>
</tr>
<tr class="odd">
<td><strong>CF</strong></td>
<td>-</td>
<td>✓</td>
<td>Better than BK</td>
<td>Business cycle isolation</td>
</tr>
<tr class="even">
<td><strong>Hamilton</strong></td>
<td>✓</td>
<td>✓</td>
<td>Good</td>
<td>Modern alternative to HP</td>
</tr>
</tbody>
</table>
</div>
<div class="section level3">
<h3 id="parameter-quick-reference">Parameter Quick Reference<a class="anchor" aria-label="anchor" href="#parameter-quick-reference"></a>
</h3>
<p><strong>HP Filter</strong>:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Quarterly data (standard)</span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"value"</span>, methods <span class="op">=</span> <span class="st">"hp"</span>, smoothing <span class="op">=</span> <span class="fl">1600</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Monthly data (standard)</span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"value"</span>, methods <span class="op">=</span> <span class="st">"hp"</span>, smoothing <span class="op">=</span> <span class="fl">14400</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># More flexible trend (lower lambda)</span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"value"</span>, methods <span class="op">=</span> <span class="st">"hp"</span>, smoothing <span class="op">=</span> <span class="fl">400</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Smoother trend (higher lambda)</span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"value"</span>, methods <span class="op">=</span> <span class="st">"hp"</span>, smoothing <span class="op">=</span> <span class="fl">6400</span><span class="op">)</span></span></code></pre></div>
<p><strong>Bandpass Filters</strong>:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Quarterly: standard business cycles</span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"value"</span>, methods <span class="op">=</span> <span class="st">"bk"</span>, band <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">32</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"value"</span>, methods <span class="op">=</span> <span class="st">"cf"</span>, band <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>, <span class="fl">32</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Monthly: standard business cycles</span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"value"</span>, methods <span class="op">=</span> <span class="st">"cf"</span>, band <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">18</span>, <span class="fl">96</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p><strong>Hamilton Filter</strong>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Default parameters work well for most cases</span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span> <span class="fu"><a href="../reference/augment_trends.html">augment_trends</a></span><span class="op">(</span>value_col <span class="op">=</span> <span class="st">"value"</span>, methods <span class="op">=</span> <span class="st">"hamilton"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="common-issues-and-solutions">Common Issues and Solutions<a class="anchor" aria-label="anchor" href="#common-issues-and-solutions"></a>
</h2>
<div class="section level3">
<h3 id="issue-1-trend-too-smooth-or-too-wiggly">Issue 1: Trend too smooth or too wiggly<a class="anchor" aria-label="anchor" href="#issue-1-trend-too-smooth-or-too-wiggly"></a>
</h3>
<p><strong>Problem</strong>: HP filter trend doesn’t look right
<strong>Solution</strong>: Adjust lambda - increase for smoother,
decrease for more flexible</p>
</div>
<div class="section level3">
<h3 id="issue-2-missing-values-at-edges-bk-filter">Issue 2: Missing values at edges (BK filter)<a class="anchor" aria-label="anchor" href="#issue-2-missing-values-at-edges-bk-filter"></a>
</h3>
<p><strong>Problem</strong>: BK filter returns many NAs
<strong>Solution</strong>: Use CF filter instead, or accept the loss of
observations</p>
</div>
<div class="section level3">
<h3 id="issue-3-different-methods-give-different-results">Issue 3: Different methods give different results<a class="anchor" aria-label="anchor" href="#issue-3-different-methods-give-different-results"></a>
</h3>
<p><strong>Problem</strong>: HP and Hamilton show different turning
points <strong>Solution</strong>: This is normal - no method is
“correct.” Use economic judgment and try multiple methods</p>
</div>
<div class="section level3">
<h3 id="issue-4-cycle-doesnt-match-known-recessions">Issue 4: Cycle doesn’t match known recessions<a class="anchor" aria-label="anchor" href="#issue-4-cycle-doesnt-match-known-recessions"></a>
</h3>
<p><strong>Problem</strong>: Filter doesn’t identify known economic
downturns <strong>Solution</strong>: Check your data quality, try
different parameters, or use domain knowledge to adjust</p>
</div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<p>Economic filters are powerful tools for business cycle analysis:</p>
<ul>
<li>
<strong>HP filter</strong>: Use as default for trend-cycle
decomposition (λ=1600 quarterly, λ=14400 monthly)</li>
<li>
<strong>BK/CF filters</strong>: Use when you need to isolate
specific business cycle frequencies</li>
<li>
<strong>Hamilton filter</strong>: Consider as modern alternative to
HP</li>
</ul>
<p><strong>Key insights</strong>: - The output gap (cycle) measures how
far the economy is from its trend - Negative gaps indicate
recession/slack, positive gaps indicate overheating - Different sectors
can have different cyclical patterns - No method is perfect - use
economic judgment alongside statistical tools</p>
</div>
<div class="section level2">
<h2 id="further-reading">Further Reading<a class="anchor" aria-label="anchor" href="#further-reading"></a>
</h2>
<ul>
<li>For general introduction: See “Getting Started” vignette</li>
<li>For moving averages: See “Moving Averages” vignette</li>
<li>For advanced decomposition: See “Advanced Methods” vignette on STL
and Kalman filters</li>
</ul>
</div>
<div class="section level2">
<h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<ul>
<li>Hodrick, R. J., &amp; Prescott, E. C. (1997). Postwar U.S. business
cycles: An empirical investigation. <em>Journal of Money, Credit and
Banking</em>, 1-16.</li>
<li>Baxter, M., &amp; King, R. G. (1999). Measuring business cycles:
Approximate band-pass filters. <em>Review of Economics and
Statistics</em>, 81(4), 575-593.</li>
<li>Christiano, L. J., &amp; Fitzgerald, T. J. (2003). The band pass
filter. <em>International Economic Review</em>, 44(2), 435-465.</li>
<li>Hamilton, J. D. (2018). Why you should never use the
Hodrick-Prescott filter. <em>Review of Economics and Statistics</em>,
100(5), 831-843.</li>
</ul>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Vinicius Oike.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
